import{_ as i}from"./chunks/plugin-vue_export-helper.DlAUqK2U.js";import{A as t,b as n,k as l,ah as a,g as o}from"./chunks/chartjs.CT3i_C7A.js";const m=JSON.parse('{"title":"üîÑ Migrating from nuxt-i18n to Nuxt I18n Micro","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"guide/migration.md","filePath":"guide/migration.md","lastUpdated":1770975205000}'),r={name:"guide/migration.md"};function d(h,s,p,c,k,u){const e=t("VpFolderTree");return l(),n("div",null,[s[0]||(s[0]=a(`<h1 id="üîÑ-migrating-from-nuxt-i18n-to-nuxt-i18n-micro" tabindex="-1">üîÑ Migrating from <code>nuxt-i18n</code> to <code>Nuxt I18n Micro</code> <a class="header-anchor" href="#üîÑ-migrating-from-nuxt-i18n-to-nuxt-i18n-micro" aria-label="Permalink to &quot;üîÑ Migrating from \`nuxt-i18n\` to \`Nuxt I18n Micro\`&quot;">‚Äã</a></h1><div class="tip custom-block"><p class="custom-block-title">Looking for the v2 ‚Üí v3 upgrade guide?</p><p>See <a href="/nuxt-i18n-micro/guide/v3-upgrade">Upgrading from v2.x to v3.0.0</a>.</p></div><h2 id="why-migrate" tabindex="-1">Why Migrate? <a class="header-anchor" href="#why-migrate" aria-label="Permalink to &quot;Why Migrate?&quot;">‚Äã</a></h2><ul><li><strong>‚ö° Improved Performance</strong>: Up to 90% faster build times and 88% less memory</li><li><strong>üîß Simplified Configuration</strong>: Streamlined setup with sensible defaults</li><li><strong>üìâ Better Resource Management</strong>: Optimized handling of large translation files</li></ul><h2 id="key-differences" tabindex="-1">Key Differences <a class="header-anchor" href="#key-differences" aria-label="Permalink to &quot;Key Differences&quot;">‚Äã</a></h2><table tabindex="0"><thead><tr><th>Feature</th><th><code>nuxt-i18n</code></th><th><code>Nuxt I18n Micro</code></th></tr></thead><tbody><tr><td>Translation files</td><td>JS/TS/JSON, loaded via <code>vueI18n</code></td><td>JSON only, auto-generated in dev</td></tr><tr><td>Route generation</td><td>Runtime</td><td>Build-time (<code>@i18n-micro/route-strategy</code>)</td></tr><tr><td>Translation loading</td><td>Bundled into JS</td><td>Lazy-loaded JSON per page</td></tr><tr><td>Locale state</td><td><code>useI18n()</code> from <code>vue-i18n</code></td><td><code>useI18nLocale()</code> composable</td></tr><tr><td><code>detectBrowserLanguage</code></td><td>Supported</td><td>Use <code>autoDetectLanguage</code> instead</td></tr></tbody></table><h2 id="step-by-step" tabindex="-1">Step-by-Step <a class="header-anchor" href="#step-by-step" aria-label="Permalink to &quot;Step-by-Step&quot;">‚Äã</a></h2><h3 id="_1-install" tabindex="-1">1. Install <a class="header-anchor" href="#_1-install" aria-label="Permalink to &quot;1. Install&quot;">‚Äã</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nuxt-i18n-micro</span></span></code></pre></div><h3 id="_2-update-configuration" tabindex="-1">2. Update Configuration <a class="header-anchor" href="#_2-update-configuration" aria-label="Permalink to &quot;2. Update Configuration&quot;">‚Äã</a></h3><p><strong>Before (nuxt-i18n):</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineNuxtConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  modules: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;nuxt-i18n&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  i18n: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    locales: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { code: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, iso: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en-US&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { code: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fr&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, iso: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fr-FR&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    defaultLocale: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vueI18n: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./i18n.config.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    detectBrowserLanguage: { useCookie: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>After (Nuxt I18n Micro v3):</strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineNuxtConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  modules: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;nuxt-i18n-micro&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  i18n: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    locales: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { code: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, iso: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en-US&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ltr&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { code: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fr&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, iso: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fr-FR&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ltr&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    defaultLocale: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    translationDir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;locales&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    meta: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    localeCookie: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user-locale&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    autoDetectLanguage: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="_3-reorganize-translation-files" tabindex="-1">3. Reorganize Translation Files <a class="header-anchor" href="#_3-reorganize-translation-files" aria-label="Permalink to &quot;3. Reorganize Translation Files&quot;">‚Äã</a></h3><p>Move translations to the <code>locales</code> directory in JSON format. Here is a full project comparison:</p>`,16)),o(e,{data:[{name:"Before (nuxt-i18n)",isFolder:!0,children:[{name:"my-app",isFolder:!0,children:[{name:"i18n",isFolder:!0,children:[{name:"locales",isFolder:!0,children:[{name:"en.json",isFolder:!1,note:"all translations in one file",status:"removed"},{name:"ru.json",isFolder:!1,status:"removed"},{name:"de.json",isFolder:!1,status:"removed"}]}],note:"langDir"},{name:"pages",isFolder:!0,children:[{name:"index.vue",isFolder:!1},{name:"page.vue",isFolder:!1}]},{name:"server",isFolder:!0,children:[{name:"tsconfig.json",isFolder:!1}]},{name:"nuxt.config.ts",isFolder:!1,note:"config will change",status:"modified"},{name:"package.json",isFolder:!1}]}],tab:"Before (nuxt-i18n)"},{name:"After (Nuxt I18n Micro)",isFolder:!0,children:[{name:"my-app",isFolder:!0,children:[{name:"locales",isFolder:!0,children:[{name:"en.json",isFolder:!1,note:"root-level translations",status:"added"},{name:"ru.json",isFolder:!1,status:"added"},{name:"de.json",isFolder:!1,status:"added"},{name:"pages",isFolder:!0,children:[{name:"index",isFolder:!0,children:[{name:"en.json",isFolder:!1,status:"added"},{name:"ru.json",isFolder:!1,status:"added"},{name:"de.json",isFolder:!1,status:"added"}],status:"added"},{name:"page",isFolder:!0,children:[{name:"en.json",isFolder:!1,status:"added"},{name:"ru.json",isFolder:!1,status:"added"},{name:"de.json",isFolder:!1,status:"added"}],status:"added"}],note:"page-specific",status:"added"}],note:"translationDir",status:"added"},{name:"pages",isFolder:!0,children:[{name:"index.vue",isFolder:!1,note:"API changes",status:"modified"},{name:"page.vue",isFolder:!1,status:"modified"}]},{name:"server",isFolder:!0,children:[{name:"tsconfig.json",isFolder:!1}]},{name:"nuxt.config.ts",isFolder:!1,note:"new config",status:"modified"},{name:"package.json",isFolder:!1}]}],tab:"After (Nuxt I18n Micro)"}],"default-open":!0,"show-toolbar":!0,"show-badges":!0,interactive:!0}),s[1]||(s[1]=a(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Missing page-specific translation files are <strong>auto-generated</strong> in development mode ‚Äî just run <code>nuxt dev</code> and the module will create empty JSON files for each page and locale.</p></div><h3 id="_4-update-navigation" tabindex="-1">4. Update Navigation <a class="header-anchor" href="#_4-update-navigation" aria-label="Permalink to &quot;4. Update Navigation&quot;">‚Äã</a></h3><div class="language-diff vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- &lt;nuxt-link :to=&quot;{ name: &#39;index&#39; }&quot;&gt;Home&lt;/nuxt-link&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ &lt;NuxtLink :to=&quot;$localeRoute({ name: &#39;index&#39; })&quot;&gt;Home&lt;/NuxtLink&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ &lt;!-- or use the built-in component --&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ &lt;i18n-link :to=&quot;{ name: &#39;index&#39; }&quot;&gt;Home&lt;/i18n-link&gt;</span></span></code></pre></div><h3 id="_5-update-seo" tabindex="-1">5. Update SEO <a class="header-anchor" href="#_5-update-seo" aria-label="Permalink to &quot;5. Update SEO&quot;">‚Äã</a></h3><p>Remove any manual SEO configurations from <code>nuxt-i18n</code>. Nuxt I18n Micro generates <code>hreflang</code>, canonical URLs, and Open Graph tags automatically when <code>meta: true</code> is set.</p><h3 id="_6-test" tabindex="-1">6. Test <a class="header-anchor" href="#_6-test" aria-label="Permalink to &quot;6. Test&quot;">‚Äã</a></h3><p>Thoroughly test translations, locale switching, redirects, and SEO meta tags.</p><hr><h2 id="üõ°Ô∏è-common-issues-and-troubleshooting" tabindex="-1">üõ°Ô∏è Common Issues and Troubleshooting <a class="header-anchor" href="#üõ°Ô∏è-common-issues-and-troubleshooting" aria-label="Permalink to &quot;üõ°Ô∏è Common Issues and Troubleshooting&quot;">‚Äã</a></h2><h3 id="‚ùå-translation-files-not-loading" tabindex="-1">‚ùå Translation Files Not Loading <a class="header-anchor" href="#‚ùå-translation-files-not-loading" aria-label="Permalink to &quot;‚ùå Translation Files Not Loading&quot;">‚Äã</a></h3><p>Ensure translation files are in the correct directory and follow JSON format. Verify that <code>translationDir</code> matches your file location.</p><h3 id="‚ö†Ô∏è-route-not-found-errors" tabindex="-1">‚ö†Ô∏è Route Not Found Errors <a class="header-anchor" href="#‚ö†Ô∏è-route-not-found-errors" aria-label="Permalink to &quot;‚ö†Ô∏è Route Not Found Errors&quot;">‚Äã</a></h3><p>Check that all locale codes in <code>locales</code> array are correct and that routes are properly set up.</p><h3 id="üè∑Ô∏è-missing-seo-tags" tabindex="-1">üè∑Ô∏è Missing SEO Tags <a class="header-anchor" href="#üè∑Ô∏è-missing-seo-tags" aria-label="Permalink to &quot;üè∑Ô∏è Missing SEO Tags&quot;">‚Äã</a></h3><p>Verify that <code>meta: true</code> is set and each locale has a valid <code>iso</code> code.</p><h3 id="üîÑ-hydration-mismatches" tabindex="-1">üîÑ Hydration Mismatches <a class="header-anchor" href="#üîÑ-hydration-mismatches" aria-label="Permalink to &quot;üîÑ Hydration Mismatches&quot;">‚Äã</a></h3><p>If using <code>no_prefix</code> strategy, set the locale in a server plugin with <code>order: -10</code> using <code>useI18nLocale().setLocale()</code> to ensure server and client agree on the locale. See <a href="/nuxt-i18n-micro/guide/custom-auto-detect">Custom Language Detection</a>.</p><h3 id="üç™-redirects-not-working" tabindex="-1">üç™ Redirects Not Working <a class="header-anchor" href="#üç™-redirects-not-working" aria-label="Permalink to &quot;üç™ Redirects Not Working&quot;">‚Äã</a></h3><p>For prefix strategies, ensure <code>localeCookie: &#39;user-locale&#39;</code> is set. Without a cookie, the redirect plugin has no way to remember the user&#39;s preferred locale across page reloads.</p>`,19))])}const f=i(r,[["render",d]]);export{m as __pageData,f as default};
